首先发送方向接收方发送报文,内容是文件名字.

接收方收到报文后,如果同意接受,则回复ok,否则回复no

发送方收到回复,根据内容决定下一步是否发送.

如果接收方同意接受,发送方发送文件大小.

接收方收到文件大小后,准备缓冲区,向发送方发送准备就绪报文ready

发送方收到接收方的ready报文,开始传输文件内容.传输完毕后断开连接

接收方收到的报文大小满足文件长度后断开连接.